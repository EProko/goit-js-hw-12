{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nconst API_KEY = '41755914-7aa1ef8e2afd56281fb8e3373';\nlet current_page;\n\nexport async function getPhotos(userQuery, page) {\n  current_page = 1;\n  const response = await axios.get(\n    `/?key=${API_KEY}&q=${userQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n  );\n  return response;\n}\n\nexport async function loadMorePhotos(query) {\n  current_page++;\n  const response = await axios.get(\n    `/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${current_page}&per_page=15`\n  );\n  return response;\n}\n","export function renderPhoto(imagesArray, imagesList) {\n  const imgElements = imagesArray\n    .map(image => {\n      return `<li class=\"gallery-card\"><a class=\"gallery-link\" href=\"${image.href}\"><img class=\"gallery-image\" src=\"${image.src}\" alt=\"${image.alt}\" /><div class=\"image-stats-card\"><div class=\"image-stats-block\"><p>Likes</p>${image.likes}</div><div class=\"image-stats-block\"><p>Views</p>${image.views}</div><div class=\"image-stats-block\"><p>Comments</p>${image.comments}</div><div class=\"image-stats-block\"><p>Downloads</p>${image.downloads}</div></div></a></li>`;\n    })\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', imgElements);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { loadMorePhotos } from './js/pixabay-api';\nimport { renderPhoto } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst loaderElement = document.querySelector('.loader');\nconst imagesList = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('[data-action =\"load-more\"]');\nconst lightboxInstance = new SimpleLightbox('.gallery .gallery-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nhideLoadBtn();\nhideLoader();\n\nsearchForm.addEventListener('submit', handleSubmit);\n\nlet imagesArray = [];\nlet query;\nlet page = 1;\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  imagesList.innerHTML = '';\n\n  const userQuery = encodeURIComponent(event.target.elements['search'].value);\n  query = userQuery;\n\n  if (userQuery === '') {\n    iziToast.error({\n      message: 'Please enter your search query!',\n      messageColor: '#FFF',\n      messageSize: '16',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      icon: 'ico-error',\n      iconColor: '#FFF',\n    });\n    hideLoader();\n    return;\n  }\n\n  getPhotos(userQuery, page)\n    .then(response => {\n      if (response.data.total === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n          messageColor: '#FFF',\n          messageSize: '16',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n          icon: 'ico-error',\n          iconColor: '#FFF',\n        });\n        hideLoadBtn();\n        hideLoader();\n      } else {\n        createImageArray(response);\n        searchForm.reset();\n      }\n    })\n    .catch(error => {\n      alert(error.message);\n      hideLoader();\n    });\n}\n\nloadMoreBtn.addEventListener('click', renderMorePhoto);\n\nfunction renderMorePhoto() {\n  hideLoadBtn();\n  showLoader();\n\n  loadMorePhotos(query)\n    .then(response => {\n      createImageArray(response);\n    })\n    .catch(error => alert(error.message));\n\n  const heightCard = document.querySelector('.gallery-card');\n  const rect = heightCard.getBoundingClientRect();\n  const options = {\n    top: rect.height * 2,\n    behavior: 'smooth',\n  };\n  window.scrollBy(options);\n}\n\nfunction createImageArray(response) {\n  const hitsArray = response.data.hits;\n\n  imagesArray = hitsArray.map(Object => {\n    return {\n      href: Object.largeImageURL,\n      src: Object.webformatURL,\n      alt: Object.tags,\n      likes: Object.likes,\n      views: Object.views,\n      comments: Object.comments,\n      downloads: Object.downloads,\n    };\n  });\n  renderPhoto(imagesArray, imagesList);\n  lightboxInstance.refresh();\n\n  if (hitsArray.length < 15) {\n    hideLoader();\n    hideLoadBtn();\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    hideLoader();\n    showLoadBtn();\n  }\n}\n\nfunction showLoader() {\n  loaderElement.style.display = 'block';\n}\nfunction hideLoader() {\n  loaderElement.style.display = 'none';\n}\nfunction hideLoadBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\nfunction showLoadBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n"],"names":["axios","API_KEY","current_page","getPhotos","userQuery","page","loadMorePhotos","query","renderPhoto","imagesArray","imagesList","imgElements","image","searchForm","loaderElement","loadMoreBtn","lightboxInstance","SimpleLightbox","hideLoadBtn","hideLoader","handleSubmit","event","showLoader","iziToast","response","createImageArray","error","renderMorePhoto","options","hitsArray","Object","showLoadBtn"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,0BAEzB,MAAMC,EAAU,qCAChB,IAAIC,EAEG,eAAeC,EAAUC,EAAWC,EAAM,CAC/C,OAAAH,EAAe,EACE,MAAMF,EAAM,IAC3B,SAASC,CAAO,MAAMG,CAAS,iEAAiEC,CAAI,cACxG,CAEA,CAEO,eAAeC,EAAeC,EAAO,CAC1C,OAAAL,IACiB,MAAMF,EAAM,IAC3B,SAASC,CAAO,MAAMM,CAAK,iEAAiEL,CAAY,cAC5G,CAEA,CCrBO,SAASM,EAAYC,EAAaC,EAAY,CACnD,MAAMC,EAAcF,EACjB,IAAIG,GACI,0DAA0DA,EAAM,IAAI,qCAAqCA,EAAM,GAAG,UAAUA,EAAM,GAAG,gFAAgFA,EAAM,KAAK,oDAAoDA,EAAM,KAAK,uDAAuDA,EAAM,QAAQ,wDAAwDA,EAAM,SAAS,uBACnb,EACA,KAAK,EAAE,EACVF,EAAW,mBAAmB,YAAaC,CAAW,CACxD,CCEA,MAAME,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAgB,SAAS,cAAc,SAAS,EAChDJ,EAAa,SAAS,cAAc,UAAU,EAC9CK,EAAc,SAAS,cAAc,4BAA4B,EACjEC,EAAmB,IAAIC,EAAe,yBAA0B,CACpE,SAAU,GACV,aAAc,MACd,gBAAiB,QACnB,CAAC,EAEDC,IACAC,IAEAN,EAAW,iBAAiB,SAAUO,CAAY,EAElD,IAAIX,EAAc,CAAA,EACdF,EACAF,EAAO,EAEX,SAASe,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBC,IACAZ,EAAW,UAAY,GAEvB,MAAMN,EAAY,mBAAmBiB,EAAM,OAAO,SAAS,OAAU,KAAK,EAG1E,GAFAd,EAAQH,EAEJA,IAAc,GAAI,CACpBmB,EAAS,MAAM,CACb,QAAS,kCACT,aAAc,OACd,YAAa,KACb,gBAAiB,UACjB,SAAU,WACV,KAAM,YACN,UAAW,MACjB,CAAK,EACDJ,IACA,MACD,CAEDhB,EAAUC,EAAWC,CAAI,EACtB,KAAKmB,GAAY,CACZA,EAAS,KAAK,QAAU,GAC1BD,EAAS,MAAM,CACb,QACE,4EACF,aAAc,OACd,YAAa,KACb,gBAAiB,UACjB,SAAU,WACV,KAAM,YACN,UAAW,MACrB,CAAS,EACDL,IACAC,MAEAM,EAAiBD,CAAQ,EACzBX,EAAW,MAAK,EAExB,CAAK,EACA,MAAMa,GAAS,CACd,MAAMA,EAAM,OAAO,EACnBP,GACN,CAAK,CACL,CAEAJ,EAAY,iBAAiB,QAASY,CAAe,EAErD,SAASA,GAAkB,CACzBT,IACAI,IAEAhB,EAAeC,CAAK,EACjB,KAAKiB,GAAY,CAChBC,EAAiBD,CAAQ,CAC/B,CAAK,EACA,MAAME,GAAS,MAAMA,EAAM,OAAO,CAAC,EAItC,MAAME,EAAU,CACd,IAHiB,SAAS,cAAc,eAAe,EACjC,wBAEZ,OAAS,EACnB,SAAU,QACd,EACE,OAAO,SAASA,CAAO,CACzB,CAEA,SAASH,EAAiBD,EAAU,CAClC,MAAMK,EAAYL,EAAS,KAAK,KAEhCf,EAAcoB,EAAU,IAAIC,IACnB,CACL,KAAMA,EAAO,cACb,IAAKA,EAAO,aACZ,IAAKA,EAAO,KACZ,MAAOA,EAAO,MACd,MAAOA,EAAO,MACd,SAAUA,EAAO,SACjB,UAAWA,EAAO,SACxB,EACG,EACDtB,EAAYC,EAAaC,CAAU,EACnCM,EAAiB,QAAO,EAEpBa,EAAU,OAAS,IACrBV,IACAD,IACAK,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACf,CAAK,IAEDJ,IACAY,IAEJ,CAEA,SAAST,GAAa,CACpBR,EAAc,MAAM,QAAU,OAChC,CACA,SAASK,GAAa,CACpBL,EAAc,MAAM,QAAU,MAChC,CACA,SAASI,GAAc,CACrBH,EAAY,UAAU,IAAI,WAAW,CACvC,CACA,SAASgB,GAAc,CACrBhB,EAAY,UAAU,OAAO,WAAW,CAC1C"}
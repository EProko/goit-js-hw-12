{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nconst API_KEY = '41755914-7aa1ef8e2afd56281fb8e3373';\n\nexport async function getPhotos(userQuery, page) {\n  const response = await axios.get(\n    `/?key=${API_KEY}&q=${userQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n  );\n  return response;\n}\n\nexport async function loadMorePhotos(query, page) {\n  const response = await axios.get(\n    `/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n  );\n  return response;\n}\n","export function renderPhoto(imagesArray, imagesList) {\n  const imgElements = imagesArray\n    .map(image => {\n      return `<li class=\"gallery-card\"><a class=\"gallery-link\" href=\"${image.href}\"><img class=\"gallery-image\" src=\"${image.src}\" alt=\"${image.alt}\" /><div class=\"image-stats-card\"><div class=\"image-stats-block\"><p>Likes</p>${image.likes}</div><div class=\"image-stats-block\"><p>Views</p>${image.views}</div><div class=\"image-stats-block\"><p>Comments</p>${image.comments}</div><div class=\"image-stats-block\"><p>Downloads</p>${image.downloads}</div></div></a></li>`;\n    })\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', imgElements);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { loadMorePhotos } from './js/pixabay-api';\nimport { renderPhoto } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst loaderElement = document.querySelector('.loader');\nconst imagesList = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('[data-action =\"load-more\"]');\nconst lightboxInstance = new SimpleLightbox('.gallery .gallery-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nhideLoadBtn();\nhideLoader();\n\nsearchForm.addEventListener('submit', handleSubmit);\n\nlet imagesArray = [];\nlet query;\nlet page = 1;\nconst totalPages = 500 / 15;\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  imagesList.innerHTML = '';\n\n  const userQuery = encodeURIComponent(event.target.elements['search'].value);\n  query = userQuery;\n\n  if (userQuery === '') {\n    iziToast.error({\n      message: 'Please enter your search query!',\n      messageColor: '#FFF',\n      messageSize: '16',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      icon: 'ico-error',\n      iconColor: '#FFF',\n    });\n    hideLoader();\n    return;\n  }\n\n  getPhotos(userQuery, page)\n    .then(response => {\n      if (response.data.total === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n          messageColor: '#FFF',\n          messageSize: '16',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n          icon: 'ico-error',\n          iconColor: '#FFF',\n        });\n        hideLoadBtn();\n        hideLoader();\n      } else {\n        imgArray(response);\n        searchForm.reset();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n      hideLoader();\n    });\n}\n\nloadMoreBtn.addEventListener('click', renderMorePhoto);\n\nasync function renderMorePhoto() {\n  if (page > totalPages) {\n    hideLoadBtn();\n    return iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n\n  hideLoadBtn();\n  showLoader();\n\n  page++;\n  await loadMorePhotos(query, page).then(response => {\n    imgArray(response);\n  });\n\n  const heightCard = document.querySelector('.gallery-card');\n  const rect = heightCard.getBoundingClientRect();\n  const options = {\n    top: rect.height * 2,\n    behavior: 'smooth',\n  };\n  window.scrollBy(options);\n}\n\nfunction imgArray(response) {\n  const hitsArray = response.data.hits;\n\n  imagesArray = hitsArray.map(Object => {\n    return {\n      href: Object.largeImageURL,\n      src: Object.webformatURL,\n      alt: Object.tags,\n      likes: Object.likes,\n      views: Object.views,\n      comments: Object.comments,\n      downloads: Object.downloads,\n    };\n  });\n  renderPhoto(imagesArray, imagesList);\n  lightboxInstance.refresh();\n  hideLoader();\n  showLoadBtn();\n}\n\nfunction showLoader() {\n  loaderElement.style.display = 'block';\n}\nfunction hideLoader() {\n  loaderElement.style.display = 'none';\n}\nfunction hideLoadBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\nfunction showLoadBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n"],"names":["axios","API_KEY","getPhotos","userQuery","page","loadMorePhotos","query","renderPhoto","imagesArray","imagesList","imgElements","image","searchForm","loaderElement","loadMoreBtn","lightboxInstance","SimpleLightbox","hideLoadBtn","hideLoader","handleSubmit","totalPages","event","showLoader","iziToast","response","imgArray","error","renderMorePhoto","options","Object","showLoadBtn"],"mappings":"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"}